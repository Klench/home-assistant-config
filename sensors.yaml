- platform: yr
  monitored_conditions:
    - symbol
    - temperature

- platform: plex_recently_added
  host: 192.168.2.2
  port: 32400
  token: !secret plex_token
  ssl: true
  ssl_cert: false
  download_images: true
  max: 5
  section_types:
    - movie
    - show

# - platform: trakt
#   id: !secret trakt_id
#   secret: !secret trakt_secret
#   username: !secret trakt_username
#   days: 10

- platform: krisinformation
  name: "Krisinformation Västra Götaland"
  county: "Västra Götalands län"
  latitude: !secret home_latitude
  longitude: !secret home_longitude
  radius: 100

- platform: time_date
  display_options:
    - 'time'
    - 'date'
    - 'date_time'

- platform: huesensor

- platform: vasttrafik
  key: !secret vasttrafik_key
  secret: !secret vasttrafik_secret
  departures:
    - name: Buss 19
      from: Sörgårdsskolan

- platform: template
  sensors:
    alarm_clock_time_weekdays:
      friendly_name: 'Väckningstid'
      icon_template: 'mdi:alarm'
      value_template: '{{ "%0.02d:%0.02d" | format(states.input_number.alarm_hours_weekdays.state | int, states.input_number.alarm_minutes_weekdays.state | int ) }}'
    alarm_clock_time_weekend:
      friendly_name: 'Väckningstid'
      icon_template: 'mdi:alarm'
      value_template: '{{ "%0.02d:%0.02d" | format(states.input_number.alarm_hours_weekend.state | int, states.input_number.alarm_minutes_weekend.state | int ) }}'
    outside_temperature:
      friendly_name: 'Temperatur'
      icon_template: mdi:thermometer
      unit_of_measurement: '°C'
      value_template: '{{ (float(states.sensor.yr_temperature.state) * 0.4 + float(states.weather.smhi_hem.attributes.temperature) * 0.6) | round(1) }}'
    hallway_switch_updated:
      friendly_name: 'Hallway switch updated'
      value_template: '{{ states.sensor.hallway_switch.attributes.last_updated }}'
    work_time_in:
      friendly_name: 'Inpasseringstid'
      icon_template: mdi:clock-in
      value_template: '{{ "%0.02d:%0.02d" | format(states.input_number.work_time_hours_in.state | int, states.input_number.work_time_minutes_in.state | int ) }}'
    work_time_out:
      friendly_name: 'Utpasseringstid'
      icon_template: mdi:clock-out
      value_template: '{{ "%0.02d:%0.02d" | format(states.input_number.work_time_hours_out.state | int, states.input_number.work_time_minutes_out.state | int ) }}'
    work_time:
      friendly_name: 'Arbetstid timmar'
      icon_template: mdi:calendar-clock
      value_template: >-
        {{ float((as_timestamp(strptime(states.sensor.work_time_out.state, '%H:%M')) | int - as_timestamp(strptime(states.sensor.work_time_in.state, '%H:%M')) | int - states.input_number.work_time_minutes_lunch.state | int * 60)/3600) | round(1) }}